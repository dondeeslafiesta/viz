(this["webpackJsonpreact-d3"]=this["webpackJsonpreact-d3"]||[]).push([[0],{143:function(t,e,a){t.exports=a(157)},148:function(t,e,a){},150:function(t,e,a){},151:function(t,e,a){},157:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(30),i=a.n(o),s=(a(148),a(88)),c=a(4),u=a(90),l=(a(150),a(3)),p=a.n(l),d=a(18),h=a(6),f=a(13),m=a(14),v=a(15),g=(a(151),a(7)),y=a(19),b=a(34),j=function(){function t(e,a){Object(h.a)(this,t),this.mapper=void 0,this.data=void 0,this.mapper_json=void 0,this.mapper_rev=void 0,this.data_csv=void 0,this.loaded=void 0,this.mapper=e,this.data=a,this.loaded=!1}return Object(f.a)(t,[{key:"load",value:function(){var t=Object(d.a)(p.a.mark((function t(){var e,a,n,r,o,i,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.e(this.mapper);case 2:return this.mapper_json=t.sent,this.mapper_rev={},t.next=6,g.a(this.data);case 6:for(e in this.data_csv=t.sent,this.mapper_json)a=this.mapper_json[e],this.mapper_rev[a]=e;for(r in n={},this.data_csv)(o=this.data_csv[r]).State in this.mapper_rev&&(i=o.State,s=o.Average,c=this.mapper_rev[i],n[c]=parseFloat(s));return console.log(n),this.loaded=!0,t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),k=function(t){Object(m.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).ref=void 0,n.state={},n.ref=r.a.createRef(),n}return Object(f.a)(a,[{key:"hideTooltip",value:function(){g.g("#tooltip").attr("style","position: absolute; opacity: 0;")}},{key:"showToolTip",value:function(t){g.g("#tooltip").style("opacity",1).text(t)}},{key:"data",value:function(t,e){return"string"==typeof e&&e in t?t[e]:0}},{key:"drawMap",value:function(){var t=Object(d.a)(p.a.mark((function t(){var e,a,n,r,o,i,s,c,u,l,d,h,f=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.e("/geo/states.quantized.topo.json");case 2:if(e=t.sent,a=e,n=g.f(g.d).domain([0,25]),"GeometryCollection"===a.objects.states.type){t.next=7;break}return t.abrupt("return");case 7:return r=b.a(a),o=b.b(r,.3),console.log(o),r=b.c(r,o),i=y.a(r,{type:"GeometryCollection",geometries:a.objects.states.geometries.filter((function(t){return"MultiPolygon"==t.type||"Polygon"==t.type}))}),s=g.b().fitExtent([[20,20],[500,500]],i),c=g.c().projection(s),u=new j("/geo/iso.json","/geo/vaxx.csv"),t.next=17,u.load();case 17:l=t.sent,g.h("svg").append("g").selectAll("path").data(y.a(a,a.objects.states).features).join("path").attr("fill",(function(t){return n(f.data(l,t.id))})).attr("d",c).append("title").text((function(t){return"".concat(t.id)})),g.h("svg").selectAll("path").on("touchhmove mousemove",(function(t,e){g.g(t.target).attr("stroke","red").raise()})).on("touchend mouseleave",(function(t,e){g.g(t.target).attr("stroke",null).lower()})).on("mouseover",(function(t,e){var a=Math.round(f.data(l,e.id));f.showToolTip(e.properties.state_name+": "+a+"%")})).on("mouseout",(function(t){f.hideTooltip()})),d=g.g("svg"),h=g.i().on("zoom",(function(t){var e=t.transform;d.attr("transform",e.toString())})),g.h(".GeoViz").call(h);case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.drawMap();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"GeoViz",ref:this.ref},r.a.createElement("div",{id:"tooltip"}),r.a.createElement("svg",{width:"500",height:"500"}))}}]),a}(r.a.PureComponent);var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(k,null)))},x=function(){return r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("span",null,"Loading...")},r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:w})))))};i.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.8d37d59e.chunk.js.map